{% extends "base.html" %}
    {% block title %} My Music Room {% endblock %}
    {% block content %}
    <div class="container">
       <div class="card music-room-card">
    <h2 class="card-title">Unggah Musik/Video</h2>
    <form action="{{ url_for('upload_music') }}" method="post" enctype="multipart/form-data" class="upload-form">
	                <div class="form-group">
        <label for="file-upload" class="upload-label">Pilih File (Musik atau Video)</label>
        <input type="file" name="file" id="file-upload" required>
        </div>
	                <div class="form-group">
        <label for="title">Judul:</label>
        <input type="text" name="title" id="title" placeholder="Judul Lagu/video" required>
	</div>
                        <div class="form-group">
        <label for="artist">Artis:</label>
        <input type="text" name="artist" id="artist" placeholder="Nama:" required>
	</div>
        <button type="submit" class="btn btn-primary">Unggah</button>
    </form>
   </div>
		 <div class="card music-room-card">
            <h2 class="card-title">My Music Room</h2>
            <p class="music-room-description">No Worry, Bee Happy</p>
	<div class="mode-switcher-container">
    <button id="toggleModeBtn" class="btn btn-secondary mode-toggle-button">
        <svg class="video-icon" width="24px" height="24px" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12ZM12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17ZM20 6.5C20.5523 6.5 21 6.94772 21 7.5V16.5C21 17.0523 20.5523 17.5 20 17.5H4C3.44772 17.5 3 17.0523 3 16.5V7.5C3 6.94772 3.44772 6.5 4 6.5H20ZM20 8.5L4 8.5V16.5H20V8.5Z" fill-rule="evenodd" clip-rule="evenodd"/>
        </svg>
        <svg class="music-icon hidden" width="24px" height="24px" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21C15.3137 21 18 18.3137 18 15V3H19C19.5523 3 20 2.55228 20 2V1C20 0.447715 19.5523 0 19 0H5C4.44772 0 4 0.447715 4 1V2C4 2.55228 4.44772 3 5 3H6V15C6 18.3137 8.68629 21 12 21ZM18 15C18 17.2091 16.2091 19 14 19H12C9.79086 19 8 17.2091 8 15V3H12V15C12 15.5523 12.4477 16 13 16H14C14.5523 16 15 15.5523 15 15V3H18V15Z" fill-rule="evenodd" clip-rule="evenodd"/>
        </svg>
        <span class="button-text">Switch to Music Mode</span>
    </button>
</div>
<div class="music-grid">
    {% for song in music_library %}
    <div class="music-item" data-mode="video">
        <div class="media-container">
            <video class="music-player video-player" controls preload="metadata" data-src="{{ song.video_url }}">
                <source src="{{ song.video_url }}" type="video/mp4">
                Browser Anda tidak mendukung tag video.
            </video>
            <img src="{{ song.album_art or url_for('static', filename='images/default_album.png') }}" alt="Album Art" class="album-art-fallback"> 
        <audio class="music-player audio-player hidden" controls preload="metadata" data-src="{{ song.audio_url }}">
            <source src="{{ song.audio_url }}" type="audio/mpeg">
            Browser Anda tidak mendukung tag audio.
        </audio>
	</div>        
        <div class="music-details">
            <h3 class="song-title">{{ song.title }}</h3>
            <p class="artist-name">{{ song.artist }}</p>
        </div>
    </div>
    {% endfor %}
</div>

        </div>
    </div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/rosemary.js') }}">
</script>
{% endblock %}
